var vm=new Vue({
    el:'#loginpage',
    data:{
        username:'',
        passwd:'',
        usernameplaceholder:'Username',
        passwdplaceholder:'Password'
    },
    methods:{
        usernameisNull:function(e){
            if(e.target.value==''){
                e.target.placeholder='账号不能为空'
            }
        },
        passwdisNull:function(e){
            if(e.target.value==''){
                e.target.placeholder='密码不能为空'
            }
        },
        loginfn:function(){
            if($('#username').val()!=''&&$('#passwd').val()!=''){
                var that=this;
                $.ajax({
                    type:'POST',
                    url:'/logincheck',
                    data:{username:this.username,passwd:this.passwd},
                    success:function(data){
                        if(data.login=='usernamefail'){
                            that.username='';
                            $('#username').focus();
                            $('#username')[0].placeholder='用户名输入有误'
                            return;
                        }
                        if(data.login=='passwdfail'){
                            that.passwd='';
                            $('#passwd').focus();
                            $('#passwd')[0].placeholder='密码输入有误';
                            return;
                        }
                        else{
                            window.location.href='/users';
                        }
                    }
                })
            }
        }
    }
})
